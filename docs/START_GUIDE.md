# 🚀 交互式启动脚本使用指南

## 📋 功能概述

`start.sh` 是一个功能完整的交互式启动脚本，提供以下功能：

### 🎯 主要功能
1. **🌐 Web开发模式** - 启动浏览器开发服务器
2. **🖥️ Electron桌面应用** - 启动桌面应用
3. **📦 打包桌面应用** - 构建分发版本
4. **🔧 依赖管理** - 自动安装和更新依赖
5. **📊 项目信息** - 查看项目状态和配置

## 🚀 快速开始

### 启动脚本
```bash
# 在项目根目录下运行
./start.sh
```

### 首次运行
脚本会自动：
- ✅ 检查 Node.js 和 npm/yarn 环境
- ✅ 检测并安装项目依赖
- ✅ 显示交互式菜单

## 📱 功能详解

### 1. 🌐 Web开发模式

**功能**：启动Express开发服务器，支持浏览器访问

**特性**：
- 🔍 **智能端口检测**：自动检测端口3000是否被占用
- 🔄 **端口冲突处理**：
  - 选项1：自动关闭占用进程并重启
  - 选项2：使用自定义端口
  - 选项3：取消操作
- 🌐 **自动打开浏览器**：显示访问地址
- 🔥 **热重载**：支持代码修改实时刷新

**使用场景**：
- 前端开发和调试
- API接口测试
- 响应式布局调试

### 2. 🖥️ Electron桌面应用

**功能**：启动完整的桌面应用

**特性**：
- 🔧 **自动依赖检查**：检测并安装Electron
- 🔄 **端口管理**：自动处理端口冲突
- 🖥️ **原生体验**：完整的桌面应用功能
- 📱 **响应式界面**：自适应窗口大小

**使用场景**：
- 桌面应用开发
- 用户体验测试
- 功能演示

### 3. 📦 打包桌面应用

**功能**：构建可分发的桌面应用

**支持平台**：
1. **🍎 macOS** - 生成 DMG 和 ZIP 文件
2. **🪟 Windows** - 生成 NSIS 安装包
3. **🐧 Linux** - 生成 AppImage 文件
4. **🌍 所有平台** - 一次性构建所有平台
5. **🧪 测试打包** - 仅打包不分发

**输出文件**：
- 📁 输出目录：`./dist/`
- 📋 自动显示生成的文件列表
- 📊 显示文件大小信息

### 4. 🔧 依赖管理

**功能**：管理项目依赖包

**特性**：
- 🔍 **智能包管理器检测**：优先使用yarn，备选npm
- 📦 **自动安装**：检测缺失依赖并自动安装
- 🔄 **更新依赖**：手动更新所有依赖包
- ✅ **安装验证**：确保依赖安装成功

### 5. 📊 项目信息

**显示内容**：
- 📋 **基本信息**：项目名称、版本、目录
- 🛠️ **环境信息**：Node.js版本、包管理器
- 📜 **可用脚本**：package.json中定义的所有脚本
- 🌐 **服务状态**：端口占用情况、访问地址

## 🎨 界面特色

### 🌈 彩色输出
- 🔴 **红色**：错误信息
- 🟢 **绿色**：成功信息
- 🟡 **黄色**：警告信息
- 🔵 **蓝色**：操作信息
- 🟣 **紫色**：特殊标记
- 🔵 **青色**：标题和链接

### 📱 交互式菜单
- 🎯 **清晰的选项**：数字编号，易于选择
- 🔄 **循环菜单**：操作完成后返回主菜单
- ⌨️ **键盘友好**：支持Ctrl+C优雅退出
- 🖥️ **自动清屏**：保持界面整洁

## 🛠️ 高级功能

### 端口管理
```bash
# 自动检测端口占用
lsof -Pi :3000 -sTCP:LISTEN

# 智能处理冲突
- 显示占用进程信息
- 提供多种解决方案
- 自动清理僵尸进程
```

### 环境检测
```bash
# 系统环境验证
- Node.js 版本检查
- npm/yarn 可用性检测
- 项目依赖完整性验证
```

### 错误处理
```bash
# 优雅的错误处理
- 详细的错误信息
- 建议的解决方案
- 自动回滚机制
```

## 🔧 自定义配置

### 修改默认端口
```bash
# 在脚本中修改
DEFAULT_PORT=3000  # 改为你需要的端口
```

### 添加新功能
```bash
# 在主菜单中添加选项
show_main_menu() {
    echo "7) 🆕 你的新功能"
}

# 在main()函数中添加处理
case $choice in
    7)
        your_new_function
        ;;
esac
```

## 📋 故障排除

### 常见问题

#### 1. 权限问题
```bash
# 解决方案
chmod +x start.sh
```

#### 2. Node.js未安装
```bash
# 下载安装 Node.js
https://nodejs.org/
```

#### 3. 端口被占用
```bash
# 脚本会自动处理，或手动清理
lsof -ti:3000 | xargs kill -9
```

#### 4. 依赖安装失败
```bash
# 清理并重新安装
rm -rf node_modules package-lock.json
npm install
```

### 调试模式
```bash
# 启用详细输出
set -x  # 在脚本开头添加
```

## 🎯 使用建议

### 开发工作流
1. **首次使用**：运行脚本，选择"安装依赖"
2. **日常开发**：使用"Web开发模式"
3. **测试应用**：使用"Electron桌面应用"
4. **发布版本**：使用"打包桌面应用"

### 最佳实践
- 🔄 **定期更新依赖**：保持项目依赖最新
- 🧪 **测试打包**：发布前先测试打包
- 📊 **监控状态**：定期查看项目信息
- 🔧 **环境一致**：确保开发环境统一

## 🚀 快捷命令

```bash
# 直接启动开发模式
./start.sh << EOF
1
EOF

# 直接启动桌面应用
./start.sh << EOF
2
EOF

# 直接打包macOS应用
./start.sh << EOF
3
1
EOF
```

## 📞 技术支持

如果遇到问题：
1. 📋 查看项目信息 (选项5)
2. 🔧 重新安装依赖 (选项4)
3. 📖 参考本文档
4. 🐛 检查控制台错误信息

**祝你使用愉快！** 🎉
